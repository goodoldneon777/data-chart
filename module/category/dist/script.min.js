var m_category={};m_category.watch=function(){"use strict";$(".m-category").on("change",".watch",function(){var a=$(this),b=$(this).closest(".select-wrap").find(" > .elem-expand");m_category.refreshElemExpand(a,b)})},m_category.refreshElemExpand=function(a,b){"use strict";var c="",d=a.val();$.ajax({type:"POST",url:gVar.root+"/module/form_elem/dist/ajax_receiver_elem_expand.php",data:{name_id:JSON.stringify(d)},dataType:"json",success:function(c){b.html(c.html),m_category.createCategoryFilter(a)},error:function(a,b,d){c="Status: "+b+"\nError: "+d,console.log(c)}})},m_category.createCategoryFilter=function(a){"use strict";var b=a.closest(".category-wrap"),c=m_category.createParamArray(b);$.ajax({type:"POST",url:gVar.root+"/module/category_filter/dist/ajax_receiver.php",data:{param_array:JSON.stringify(c)},dataType:"json",success:function(a){b.find(".filter-wrap").html(a)},error:function(a,b,c){var d="Status: "+b+"\nError: "+c;console.log(d)}})},m_category.createParamArray=function(a){"use strict";var b=[];return a.find("select option:selected").each(function(a){b.push({value:$(this).val(),text:$(this).text()})}),b},m_category.watch(),$(".m-category .category").last().trigger("change");